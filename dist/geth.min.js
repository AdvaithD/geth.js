(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){var geth=global.geth||require("./");global.geth=geth}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./":2}],2:[function(require,module,exports){(function(process){"use strict";var fs=require("fs");var join=require("path").join;var cp=require("child_process");function GethError(message){this.name="GethError";this.message=message}GethError.prototype=new Error;var geth={debug:false,geth:null,flags:null,options:null,datadir:null,network:null,bin:null,Error:GethError,configure:function(options){this.bin=options.geth_bin||"geth";var f=options.flags||options;this.network=f.networkid;f.datadir=f.datadir||join(process.env.HOME,".ethereum-"+f.networkid);if(options.symlink){if(fs.existsSync(options.symlink))fs.unlinkSync(options.symlink);fs.symlinkSync(f.datadir,options.symlink);f.datadir=options.symlink}this.datadir=f.datadir;this.flags=[];var unlock=false;var password=false;if(options.account){this.flags=this.flags.concat(["--etherbase",options.account,"--unlock",options.account,"--password",join(this.datadir,".password")]);unlock=true;password=true}if(f&&f.constructor===Object){for(var flag in f){if(!f.hasOwnProperty(flag))continue;this.flags.push("--"+flag);if(f[flag]){if(f[flag].constructor===Array){this.flags.push(f[flag].join(" "))}else{this.flags.push(f[flag])}}if(flag==="unlock")unlock=true;if(flag==="password")password=true}}if(unlock&&!password){this.flags=this.flags.concat(["--password",join(this.datadir,".password")])}return this.flags},stop:function(callback){callback=callback||function(){};var monitor,count=0;if(this.geth){this.geth.kill();this.geth=null}(function pulse(){cp.exec("ps cax | grep geth > /dev/null",function(err){if(err===null||count>100){if(monitor)clearTimeout(monitor);return callback()}monitor=setTimeout(pulse,1e3)})})()},start:function(flags,callback){var self=this;if(this.bin){if(flags&&flags.constructor===Function){callback=flags;flags=this.flags}if(this.debug){console.log("Spawn "+this.bin+" on network "+this.network+"...")}this.geth=cp.spawn(this.bin,flags);this.geth.stdout.on("data",function(data){if(self.debug)process.stdout.write(data)});this.geth.stderr.on("data",function(data){var index=data.toString().indexOf("Tx");if(self.debug&&index>-1){data="[geth] "+data.toString().slice(index);process.stdout.write(data)}if(data.toString().indexOf("IPC service started")>-1){if(callback&&callback.constructor===Function){callback(self.geth)}}});this.geth.on("close",function(code){if(code!==2&&code!==0){if(self.geth!==null)self.stop();throw new self.Error("geth closed with code "+code)}});return this.geth}}};process.on("exit",function(){if(geth.geth)geth.stop()});module.exports=geth}).call(this,require("_process"))},{_process:5,child_process:3,fs:3,path:4}],3:[function(require,module,exports){},{}],4:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:5}],5:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}]},{},[1]);
